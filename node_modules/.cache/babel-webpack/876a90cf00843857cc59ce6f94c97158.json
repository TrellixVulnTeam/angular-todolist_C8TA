{"ast":null,"code":"'use strict';\n/**\n * @license Angular v12.0.0-next.0\n * (c) 2010-2020 Google LLC. https://angular.io/\n * License: MIT\n */\n\n(function (factory) {\n  typeof define === 'function' && define.amd ? define(factory) : factory();\n})(function () {\n  'use strict';\n  /**\n   * @license\n   * Copyright Google LLC All Rights Reserved.\n   *\n   * Use of this source code is governed by an MIT-style license that can be\n   * found in the LICENSE file at https://angular.io/license\n   */\n\n  var ProxyZoneSpec = function () {\n    function ProxyZoneSpec(defaultSpecDelegate) {\n      if (defaultSpecDelegate === void 0) {\n        defaultSpecDelegate = null;\n      }\n\n      this.defaultSpecDelegate = defaultSpecDelegate;\n      this.name = 'ProxyZone';\n      this._delegateSpec = null;\n      this.properties = {\n        'ProxyZoneSpec': this\n      };\n      this.propertyKeys = null;\n      this.lastTaskState = null;\n      this.isNeedToTriggerHasTask = false;\n      this.tasks = [];\n      this.setDelegate(defaultSpecDelegate);\n    }\n\n    ProxyZoneSpec.get = function () {\n      return Zone.current.get('ProxyZoneSpec');\n    };\n\n    ProxyZoneSpec.isLoaded = function () {\n      return ProxyZoneSpec.get() instanceof ProxyZoneSpec;\n    };\n\n    ProxyZoneSpec.assertPresent = function () {\n      if (!ProxyZoneSpec.isLoaded()) {\n        throw new Error(\"Expected to be running in 'ProxyZone', but it was not found.\");\n      }\n\n      return ProxyZoneSpec.get();\n    };\n\n    ProxyZoneSpec.prototype.setDelegate = function (delegateSpec) {\n      var _this = this;\n\n      var isNewDelegate = this._delegateSpec !== delegateSpec;\n      this._delegateSpec = delegateSpec;\n      this.propertyKeys && this.propertyKeys.forEach(function (key) {\n        return delete _this.properties[key];\n      });\n      this.propertyKeys = null;\n\n      if (delegateSpec && delegateSpec.properties) {\n        this.propertyKeys = Object.keys(delegateSpec.properties);\n        this.propertyKeys.forEach(function (k) {\n          return _this.properties[k] = delegateSpec.properties[k];\n        });\n      } // if a new delegateSpec was set, check if we need to trigger hasTask\n\n\n      if (isNewDelegate && this.lastTaskState && (this.lastTaskState.macroTask || this.lastTaskState.microTask)) {\n        this.isNeedToTriggerHasTask = true;\n      }\n    };\n\n    ProxyZoneSpec.prototype.getDelegate = function () {\n      return this._delegateSpec;\n    };\n\n    ProxyZoneSpec.prototype.resetDelegate = function () {\n      var delegateSpec = this.getDelegate();\n      this.setDelegate(this.defaultSpecDelegate);\n    };\n\n    ProxyZoneSpec.prototype.tryTriggerHasTask = function (parentZoneDelegate, currentZone, targetZone) {\n      if (this.isNeedToTriggerHasTask && this.lastTaskState) {\n        // last delegateSpec has microTask or macroTask\n        // should call onHasTask in current delegateSpec\n        this.isNeedToTriggerHasTask = false;\n        this.onHasTask(parentZoneDelegate, currentZone, targetZone, this.lastTaskState);\n      }\n    };\n\n    ProxyZoneSpec.prototype.removeFromTasks = function (task) {\n      if (!this.tasks) {\n        return;\n      }\n\n      for (var i = 0; i < this.tasks.length; i++) {\n        if (this.tasks[i] === task) {\n          this.tasks.splice(i, 1);\n          return;\n        }\n      }\n    };\n\n    ProxyZoneSpec.prototype.getAndClearPendingTasksInfo = function () {\n      if (this.tasks.length === 0) {\n        return '';\n      }\n\n      var taskInfo = this.tasks.map(function (task) {\n        var dataInfo = task.data && Object.keys(task.data).map(function (key) {\n          return key + ':' + task.data[key];\n        }).join(',');\n        return \"type: \" + task.type + \", source: \" + task.source + \", args: {\" + dataInfo + \"}\";\n      });\n      var pendingTasksInfo = '--Pending async tasks are: [' + taskInfo + ']'; // clear tasks\n\n      this.tasks = [];\n      return pendingTasksInfo;\n    };\n\n    ProxyZoneSpec.prototype.onFork = function (parentZoneDelegate, currentZone, targetZone, zoneSpec) {\n      if (this._delegateSpec && this._delegateSpec.onFork) {\n        return this._delegateSpec.onFork(parentZoneDelegate, currentZone, targetZone, zoneSpec);\n      } else {\n        return parentZoneDelegate.fork(targetZone, zoneSpec);\n      }\n    };\n\n    ProxyZoneSpec.prototype.onIntercept = function (parentZoneDelegate, currentZone, targetZone, delegate, source) {\n      if (this._delegateSpec && this._delegateSpec.onIntercept) {\n        return this._delegateSpec.onIntercept(parentZoneDelegate, currentZone, targetZone, delegate, source);\n      } else {\n        return parentZoneDelegate.intercept(targetZone, delegate, source);\n      }\n    };\n\n    ProxyZoneSpec.prototype.onInvoke = function (parentZoneDelegate, currentZone, targetZone, delegate, applyThis, applyArgs, source) {\n      this.tryTriggerHasTask(parentZoneDelegate, currentZone, targetZone);\n\n      if (this._delegateSpec && this._delegateSpec.onInvoke) {\n        return this._delegateSpec.onInvoke(parentZoneDelegate, currentZone, targetZone, delegate, applyThis, applyArgs, source);\n      } else {\n        return parentZoneDelegate.invoke(targetZone, delegate, applyThis, applyArgs, source);\n      }\n    };\n\n    ProxyZoneSpec.prototype.onHandleError = function (parentZoneDelegate, currentZone, targetZone, error) {\n      if (this._delegateSpec && this._delegateSpec.onHandleError) {\n        return this._delegateSpec.onHandleError(parentZoneDelegate, currentZone, targetZone, error);\n      } else {\n        return parentZoneDelegate.handleError(targetZone, error);\n      }\n    };\n\n    ProxyZoneSpec.prototype.onScheduleTask = function (parentZoneDelegate, currentZone, targetZone, task) {\n      if (task.type !== 'eventTask') {\n        this.tasks.push(task);\n      }\n\n      if (this._delegateSpec && this._delegateSpec.onScheduleTask) {\n        return this._delegateSpec.onScheduleTask(parentZoneDelegate, currentZone, targetZone, task);\n      } else {\n        return parentZoneDelegate.scheduleTask(targetZone, task);\n      }\n    };\n\n    ProxyZoneSpec.prototype.onInvokeTask = function (parentZoneDelegate, currentZone, targetZone, task, applyThis, applyArgs) {\n      if (task.type !== 'eventTask') {\n        this.removeFromTasks(task);\n      }\n\n      this.tryTriggerHasTask(parentZoneDelegate, currentZone, targetZone);\n\n      if (this._delegateSpec && this._delegateSpec.onInvokeTask) {\n        return this._delegateSpec.onInvokeTask(parentZoneDelegate, currentZone, targetZone, task, applyThis, applyArgs);\n      } else {\n        return parentZoneDelegate.invokeTask(targetZone, task, applyThis, applyArgs);\n      }\n    };\n\n    ProxyZoneSpec.prototype.onCancelTask = function (parentZoneDelegate, currentZone, targetZone, task) {\n      if (task.type !== 'eventTask') {\n        this.removeFromTasks(task);\n      }\n\n      this.tryTriggerHasTask(parentZoneDelegate, currentZone, targetZone);\n\n      if (this._delegateSpec && this._delegateSpec.onCancelTask) {\n        return this._delegateSpec.onCancelTask(parentZoneDelegate, currentZone, targetZone, task);\n      } else {\n        return parentZoneDelegate.cancelTask(targetZone, task);\n      }\n    };\n\n    ProxyZoneSpec.prototype.onHasTask = function (delegate, current, target, hasTaskState) {\n      this.lastTaskState = hasTaskState;\n\n      if (this._delegateSpec && this._delegateSpec.onHasTask) {\n        this._delegateSpec.onHasTask(delegate, current, target, hasTaskState);\n      } else {\n        delegate.hasTask(target, hasTaskState);\n      }\n    };\n\n    return ProxyZoneSpec;\n  }(); // Export the class so that new instances can be created with proper\n  // constructor params.\n\n\n  Zone['ProxyZoneSpec'] = ProxyZoneSpec;\n});","map":{"version":3,"sources":["D:/angular-material-todo/node_modules/zone.js/dist/proxy.js"],"names":["factory","define","amd","ProxyZoneSpec","defaultSpecDelegate","name","_delegateSpec","properties","propertyKeys","lastTaskState","isNeedToTriggerHasTask","tasks","setDelegate","get","Zone","current","isLoaded","assertPresent","Error","prototype","delegateSpec","_this","isNewDelegate","forEach","key","Object","keys","k","macroTask","microTask","getDelegate","resetDelegate","tryTriggerHasTask","parentZoneDelegate","currentZone","targetZone","onHasTask","removeFromTasks","task","i","length","splice","getAndClearPendingTasksInfo","taskInfo","map","dataInfo","data","join","type","source","pendingTasksInfo","onFork","zoneSpec","fork","onIntercept","delegate","intercept","onInvoke","applyThis","applyArgs","invoke","onHandleError","error","handleError","onScheduleTask","push","scheduleTask","onInvokeTask","invokeTask","onCancelTask","cancelTask","target","hasTaskState","hasTask"],"mappings":"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","sourcesContent":["'use strict';\n/**\n * @license Angular v12.0.0-next.0\n * (c) 2010-2020 Google LLC. https://angular.io/\n * License: MIT\n */\n(function (factory) {\n    typeof define === 'function' && define.amd ? define(factory) :\n        factory();\n}((function () {\n    'use strict';\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var ProxyZoneSpec = /** @class */ (function () {\n        function ProxyZoneSpec(defaultSpecDelegate) {\n            if (defaultSpecDelegate === void 0) { defaultSpecDelegate = null; }\n            this.defaultSpecDelegate = defaultSpecDelegate;\n            this.name = 'ProxyZone';\n            this._delegateSpec = null;\n            this.properties = { 'ProxyZoneSpec': this };\n            this.propertyKeys = null;\n            this.lastTaskState = null;\n            this.isNeedToTriggerHasTask = false;\n            this.tasks = [];\n            this.setDelegate(defaultSpecDelegate);\n        }\n        ProxyZoneSpec.get = function () {\n            return Zone.current.get('ProxyZoneSpec');\n        };\n        ProxyZoneSpec.isLoaded = function () {\n            return ProxyZoneSpec.get() instanceof ProxyZoneSpec;\n        };\n        ProxyZoneSpec.assertPresent = function () {\n            if (!ProxyZoneSpec.isLoaded()) {\n                throw new Error(\"Expected to be running in 'ProxyZone', but it was not found.\");\n            }\n            return ProxyZoneSpec.get();\n        };\n        ProxyZoneSpec.prototype.setDelegate = function (delegateSpec) {\n            var _this = this;\n            var isNewDelegate = this._delegateSpec !== delegateSpec;\n            this._delegateSpec = delegateSpec;\n            this.propertyKeys && this.propertyKeys.forEach(function (key) { return delete _this.properties[key]; });\n            this.propertyKeys = null;\n            if (delegateSpec && delegateSpec.properties) {\n                this.propertyKeys = Object.keys(delegateSpec.properties);\n                this.propertyKeys.forEach(function (k) { return _this.properties[k] = delegateSpec.properties[k]; });\n            }\n            // if a new delegateSpec was set, check if we need to trigger hasTask\n            if (isNewDelegate && this.lastTaskState &&\n                (this.lastTaskState.macroTask || this.lastTaskState.microTask)) {\n                this.isNeedToTriggerHasTask = true;\n            }\n        };\n        ProxyZoneSpec.prototype.getDelegate = function () {\n            return this._delegateSpec;\n        };\n        ProxyZoneSpec.prototype.resetDelegate = function () {\n            var delegateSpec = this.getDelegate();\n            this.setDelegate(this.defaultSpecDelegate);\n        };\n        ProxyZoneSpec.prototype.tryTriggerHasTask = function (parentZoneDelegate, currentZone, targetZone) {\n            if (this.isNeedToTriggerHasTask && this.lastTaskState) {\n                // last delegateSpec has microTask or macroTask\n                // should call onHasTask in current delegateSpec\n                this.isNeedToTriggerHasTask = false;\n                this.onHasTask(parentZoneDelegate, currentZone, targetZone, this.lastTaskState);\n            }\n        };\n        ProxyZoneSpec.prototype.removeFromTasks = function (task) {\n            if (!this.tasks) {\n                return;\n            }\n            for (var i = 0; i < this.tasks.length; i++) {\n                if (this.tasks[i] === task) {\n                    this.tasks.splice(i, 1);\n                    return;\n                }\n            }\n        };\n        ProxyZoneSpec.prototype.getAndClearPendingTasksInfo = function () {\n            if (this.tasks.length === 0) {\n                return '';\n            }\n            var taskInfo = this.tasks.map(function (task) {\n                var dataInfo = task.data &&\n                    Object.keys(task.data)\n                        .map(function (key) {\n                        return key + ':' + task.data[key];\n                    })\n                        .join(',');\n                return \"type: \" + task.type + \", source: \" + task.source + \", args: {\" + dataInfo + \"}\";\n            });\n            var pendingTasksInfo = '--Pending async tasks are: [' + taskInfo + ']';\n            // clear tasks\n            this.tasks = [];\n            return pendingTasksInfo;\n        };\n        ProxyZoneSpec.prototype.onFork = function (parentZoneDelegate, currentZone, targetZone, zoneSpec) {\n            if (this._delegateSpec && this._delegateSpec.onFork) {\n                return this._delegateSpec.onFork(parentZoneDelegate, currentZone, targetZone, zoneSpec);\n            }\n            else {\n                return parentZoneDelegate.fork(targetZone, zoneSpec);\n            }\n        };\n        ProxyZoneSpec.prototype.onIntercept = function (parentZoneDelegate, currentZone, targetZone, delegate, source) {\n            if (this._delegateSpec && this._delegateSpec.onIntercept) {\n                return this._delegateSpec.onIntercept(parentZoneDelegate, currentZone, targetZone, delegate, source);\n            }\n            else {\n                return parentZoneDelegate.intercept(targetZone, delegate, source);\n            }\n        };\n        ProxyZoneSpec.prototype.onInvoke = function (parentZoneDelegate, currentZone, targetZone, delegate, applyThis, applyArgs, source) {\n            this.tryTriggerHasTask(parentZoneDelegate, currentZone, targetZone);\n            if (this._delegateSpec && this._delegateSpec.onInvoke) {\n                return this._delegateSpec.onInvoke(parentZoneDelegate, currentZone, targetZone, delegate, applyThis, applyArgs, source);\n            }\n            else {\n                return parentZoneDelegate.invoke(targetZone, delegate, applyThis, applyArgs, source);\n            }\n        };\n        ProxyZoneSpec.prototype.onHandleError = function (parentZoneDelegate, currentZone, targetZone, error) {\n            if (this._delegateSpec && this._delegateSpec.onHandleError) {\n                return this._delegateSpec.onHandleError(parentZoneDelegate, currentZone, targetZone, error);\n            }\n            else {\n                return parentZoneDelegate.handleError(targetZone, error);\n            }\n        };\n        ProxyZoneSpec.prototype.onScheduleTask = function (parentZoneDelegate, currentZone, targetZone, task) {\n            if (task.type !== 'eventTask') {\n                this.tasks.push(task);\n            }\n            if (this._delegateSpec && this._delegateSpec.onScheduleTask) {\n                return this._delegateSpec.onScheduleTask(parentZoneDelegate, currentZone, targetZone, task);\n            }\n            else {\n                return parentZoneDelegate.scheduleTask(targetZone, task);\n            }\n        };\n        ProxyZoneSpec.prototype.onInvokeTask = function (parentZoneDelegate, currentZone, targetZone, task, applyThis, applyArgs) {\n            if (task.type !== 'eventTask') {\n                this.removeFromTasks(task);\n            }\n            this.tryTriggerHasTask(parentZoneDelegate, currentZone, targetZone);\n            if (this._delegateSpec && this._delegateSpec.onInvokeTask) {\n                return this._delegateSpec.onInvokeTask(parentZoneDelegate, currentZone, targetZone, task, applyThis, applyArgs);\n            }\n            else {\n                return parentZoneDelegate.invokeTask(targetZone, task, applyThis, applyArgs);\n            }\n        };\n        ProxyZoneSpec.prototype.onCancelTask = function (parentZoneDelegate, currentZone, targetZone, task) {\n            if (task.type !== 'eventTask') {\n                this.removeFromTasks(task);\n            }\n            this.tryTriggerHasTask(parentZoneDelegate, currentZone, targetZone);\n            if (this._delegateSpec && this._delegateSpec.onCancelTask) {\n                return this._delegateSpec.onCancelTask(parentZoneDelegate, currentZone, targetZone, task);\n            }\n            else {\n                return parentZoneDelegate.cancelTask(targetZone, task);\n            }\n        };\n        ProxyZoneSpec.prototype.onHasTask = function (delegate, current, target, hasTaskState) {\n            this.lastTaskState = hasTaskState;\n            if (this._delegateSpec && this._delegateSpec.onHasTask) {\n                this._delegateSpec.onHasTask(delegate, current, target, hasTaskState);\n            }\n            else {\n                delegate.hasTask(target, hasTaskState);\n            }\n        };\n        return ProxyZoneSpec;\n    }());\n    // Export the class so that new instances can be created with proper\n    // constructor params.\n    Zone['ProxyZoneSpec'] = ProxyZoneSpec;\n})));\n"]},"metadata":{},"sourceType":"script"}